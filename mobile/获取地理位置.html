<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>获取地理位置</title>
<link href="../common/css/global.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../common/js/jquery-latest.js"></script>
<style>
</style>
<script>
$(function () {
    var showDate = $("#test");
    getLocation();
    $("a").click(function () {
        getLocation();
    })
    function getLocation()
    {
        if (navigator.geolocation)
        {
            navigator.geolocation.getCurrentPosition(getPosSuccess,getPosFail);  //获取地理位置，获取成功或失败执行相应操作
        }
        else {
            showDate.html("该浏览器不支持获取位置信息");
        }
    }
    function getPosSuccess(position)  //获取位置成功
    {
        showDate.html("纬度: " + position.coords.latitude + "<br />经度: " + position.coords.longitude);  //显示位置
    }
    function getPosFail(error)  //获取位置失败
    {
        switch(error.code)  //根据返回信息判断错误类型
        {
            case error.PERMISSION_DENIED:
                showDate.html("用户未授权获取位置信息");
                break;
            case error.POSITION_UNAVAILABLE:
                showDate.html("位置信息不可用");
                break;
            case error.TIMEOUT:
                showDate.html("请求位置信息超时");
                break;
            case error.UNKNOWN_ERROR:
                showDate.html("未知错误");
                break;
        }
    }
})
</script>
</head>

<body>

<div id="test"></div>
<a href="javascript:;">刷新地理位置</a>

</body>
</html>